\ProvidesPackage{commands}[2025/04/27 Commands for Response Letter]
\newif\ifshowdraftmarks
\showdraftmarkstrue
% \showdraftmarksfalse

% ==============================
% 基础宏包加载
% ==============================
%\RequirePackage{xcolor} % Moved to ar2rc.cls
\RequirePackage{enumitem}
\RequirePackage{csquotes}


%\definecolor{ieeelinkblue}{RGB}{0,70,160} % Moved to ar2rc.cls

\makeatletter  % 从这里开始，可以放心用 @

% ==============================
% 论文元数据
% ==============================
\def\@papertitle{N}
\def\@manusid{N/A}
\def\@authors{N/A}
\def\@affiliations{}
\def\@contactemails{N/A}

% 可选的额外元数据
\def\@journalname{N/A}
\def\@editorname{N/A}
\def\@submissiondate{N/A}
\def\@decisiondate{N/A}
\def\@resubmissiondate{N/A}
\def\@correspondingauthor{N/A}
\def\@correspondingemail{N/A}

% ---- 设置元数据的命令（外部使用） ----
\newcommand{\papertitle}[1]{\def\@papertitle{#1}}
\newcommand{\manusid}[1]{\def\@manusid{#1}}
\newcommand{\authors}[1]{\def\@authors{#1}}
\newcommand{\affiliations}[1]{\def\@affiliations{#1}}
\newcommand{\contactemails}[1]{\def\@contactemails{#1}}

\newcommand{\journalname}[1]{\def\@journalname{#1}}
\newcommand{\editorname}[1]{\def\@editorname{#1}}
\newcommand{\submissiondate}[1]{\def\@submissiondate{#1}}
\newcommand{\decisiondate}[1]{\def\@decisiondate{#1}}
\newcommand{\resubmissiondate}[1]{\def\@resubmissiondate{#1}}
\newcommand{\correspondingauthor}[1]{\def\@correspondingauthor{#1}}
\newcommand{\correspondingemail}[1]{\def\@correspondingemail{#1}}

% ---- 输出元数据的命令（正文里用这些） ----
\newcommand{\printpapertitle}{\@papertitle}
\newcommand{\printmanusid}{\@manusid}
\newcommand{\printauthors}{\@authors}
\newcommand{\printaffiliations}{\@affiliations}
\newcommand{\printcontactemails}{\@contactemails}

\newcommand{\printjournalname}{\@journalname}
\newcommand{\printeditorname}{\@editorname}
\newcommand{\printsubmissiondate}{\@submissiondate}
\newcommand{\printdecisiondate}{\@decisiondate}
\newcommand{\printresubmissiondate}{\@resubmissiondate}
\newcommand{\printcorrespondingauthor}{\@correspondingauthor}
\newcommand{\printcorrespondingemail}{\@correspondingemail}

% ==============================
% 标题/签名区渲染命令
% ==============================
\newcommand{\responseletterheader}{%
    \begin{center}
        \Large \textbf{Response Letter} \\[0.3em]
        {\large \textit{Manuscript ID: \printmanusid}}
    \end{center}
    \vspace{2em}%
}

\newcommand{\responselettersignature}{%
    \begin{flushleft}
        Sincerely,\\[0.3em]

        \printauthors \\[0.3em]
        {\small \printaffiliations} \\[0.3em]
        {\small \printcontactemails}
    \end{flushleft}
}

% ==============================
% 评论计数器及环境等
% ==============================
\newcounter{commentcounter}
\setcounter{commentcounter}{0}

\newcommand{\resetcommentcounter}{\setcounter{commentcounter}{0}}

\newenvironment{generalcomment}{%
    \phantomsection
    \addcontentsline{toc}{subsection}{General Comment}%
    \vspace{0em}\par
    \noindent\textit{General Comment:}
    \vspace{0.1em}\\
    \noindent
    \itshape
}{%
    \par\vspace{0.6em}%
}

\newenvironment{generalresponse}{%
    \par\vspace{0em}%
    \noindent\textit{General Response:}
    \vspace{0.1em}\\
    \noindent
}{%
    \par\vspace{0.3em}%
}

\newenvironment{reviewercomment}{%
    \refstepcounter{commentcounter}%
    \phantomsection
    \addcontentsline{toc}{subsection}{Comment \thecommentcounter}%
    \par\vspace{0em}%
    \noindent\textit{Comment \thecommentcounter:}
    \vspace{0.1em}\\
    \itshape
    \noindent
}{%
    \par\vspace{0.6em}%
}

\newenvironment{reviewerresponse}{%
    \par\vspace{0.0em}%
    \noindent\textit{Response:}
    \vspace{0.1em}\\
    \noindent
}{%
    \par\vspace{0.3em}%
}

\makeatother  % 到这里才结束 @ 区域

\setlist{nosep, leftmargin=*}

\newenvironment{generalblock}{%
    \begin{refsection}%
    \vspace{0pt}
}{%
    \par\vspace{0pt}%
    \renewcommand*{\bibfont}{\small\normalfont}
    \printbibliography[
      segment=\therefsegment,
      heading=subbibliography,
      title={References},
      resetnumbers=true
    ]%
    \par\vspace{0.3em}%
    \noindent\rule[0.4ex]{\linewidth}{0.3pt}%
    \vspace{0.0em}%
    \end{refsection}%
}

\newenvironment{reviewerblock}{%
    \begin{refsection}%
}{%
    \par\vspace{0pt}%
    \renewcommand*{\bibfont}{\small\normalfont}
    \printbibliography[
      segment=\therefsegment,
      heading=subbibliography,
      title={References},
      resetnumbers=true
    ]%
    \par\vspace{0.3em}%
    \noindent\rule[0.4ex]{\linewidth}{0.3pt}%
    \vspace{0.3em}%
    \end{refsection}%
}

\newcommand{\revisionblock}[1]{%
  \begin{quote}
  {\color{blue}\enquote{\dots{} #1 \dots{}}}
  \end{quote}
}
% ==============================
% 评论相关命令
% ==============================
\newcommand{\nbc}[3]{
		{\colorbox{#3}{\bfseries\sffamily\scriptsize\textcolor{white}{#1}}}
		{\textcolor{#3}{\sf$\langle$\textit{#2}$\rangle$}}}
\newcommand\test[1]{\nbc{Watermelon}{#1}{teal}}
\endinput
